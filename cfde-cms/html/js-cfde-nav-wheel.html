{% load sekizai_tags %}
<div id="cfde-nav-wheel" class="js-cfde-nav-wheel"></div>

{% addtoblock "css" %}
{# HACK: Using "css" because it loads in head ("js" does not) #}
<script type="importmap" class="js-cfde-nav-wheel">
{
  "imports": {
    "react": "https://esm.sh/react@18.3.1?dev",
    "react/": "https://esm.sh/react@18.3.1/",
    "react-dom": "https://esm.sh/react-dom@18.3.1?dev",
    "react-dom/client": "https://esm.sh/react-dom@18.3.1/client?dev",
    "react/jsx-runtime": "https://esm.sh/react@18.3.1/jsx-runtime?dev",
    "@mui/material": "https://esm.sh/@mui/material@7?deps=react@18.3.1",
    "@mui/material/": "https://esm.sh/@mui/material@7/",
    "@emotion/react": "https://esm.sh/@emotion/react@11?dev&deps=react@18.3.1",
    "@emotion/styled": "https://esm.sh/@emotion/styled@11?dev&deps=react@18.3.1"
  }
}
</script>
{% endaddtoblock %}

{% addtoblock "js" %}
<script type="module" class="js-cfde-nav-wheel">
    import CFDEWheel from 'https://cdn.jsdelivr.net/gh/TACC/Core-CMS-Custom@65096b59/cfde-cms/js/cfde-wheel/dist/index.browser.js';
    import { createElement } from 'react';
    import { createRoot } from 'react-dom/client';

    function initWheel() {
        const rootElement = document.getElementById('cfde-nav-wheel');
        if (rootElement) {
            const root = createRoot(rootElement);
            root.render(createElement(CFDEWheel));
        } else {
            console.error('Root element not found');
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initWheel);
    } else {
        initWheel();
    }
</script>
{% endaddtoblock %}
