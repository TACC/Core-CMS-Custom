{# SEE: https://github.com/wesleyboar/cfde-wheel/pull/2 #}
{% load sekizai_tags %}
<div id="cfde-nav-wheel" class="js-cfde-nav-wheel"></div>

{% addtoblock "css" %}
{# HACK: Using "css" because it loads in head ("js" does not) #}
<script type="importmap" class="js-cfde-nav-wheel">
{
  "imports": {
    "react": "https://esm.sh/react@19.1.0",
    "react/jsx-runtime": "https://esm.sh/react@19.1.0/jsx-runtime",
    "react-dom": "https://esm.sh/react-dom@19.1.0",
    "react-dom/client": "https://esm.sh/react-dom@19.1.0/client"
  }
}
</script>
{% endaddtoblock %}

{% addtoblock "js" %}
<script type="module" class="js-cfde-nav-wheel">
    import CFDEWheel from 'https://cdn.jsdelivr.net/gh/wesleyboar/cfde-wheel@fix/06fa99e1+2e4f3159/dist/index.browser.js';
    import { createElement } from 'react';
    import { createRoot } from 'react-dom/client';

    function initWheel() {
        const rootElement = document.getElementById('cfde-nav-wheel');
        if (rootElement) {
            const root = createRoot(rootElement);
            root.render(createElement(CFDEWheel));
        } else {
            console.error('Root element not found');
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initWheel);
    } else {
        initWheel();
    }
</script>
{% endaddtoblock %}
