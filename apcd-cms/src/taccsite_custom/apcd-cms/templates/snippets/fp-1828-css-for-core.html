{# FP-1828: Integrate these into Core #}
<style id="table-css--miscellaneous">
    caption {
        font-size: var(--global-font-size--small);
        text-align: unset; /* undo Bootstrap _reboot.css */
    }
</style>
<style id="form-css--required-fields">
    .field-wrapper.required > label {
        font-weight: var(--bold);
    }
    .field-wrapper.required > label .asterisk {
        font-weight: var(--regular);
    }

    /* To not render space from markup between label and asterisk */
    .field-wrapper.required:has(label > .asterisk) label {
        display: flex;
        align-items: center; /* to prevent <sup>7</sup> from being too high */
    }

    /* TODO: In Core, make these NOT be an override i.e.
             use `.field-wrapper.required .asterisk` for red "(required)" */
    .field-wrapper:not(.required) .asterisk {
        color: darkgoldenrod /* var(--global-color-warning--dark) */;
    }
    .field-wrapper:not(.required) .asterisk::after {
        content: '(important)'; /* override site.css `.asterisk::after` */
    }
</style>

{# FP-1828: Add this to Core #}
<style id="form-css--input-tweak">
    input:not([type=time], [type=date], [type=checkbox], [type=radio]), select, textarea {
        max-width: 50ch;
    }
</style>

{# FP-1828: Integrate this into Core #}
<style id="form-css--label-tweak">
    /* TODO: In Core, make these NOT be an override e.g. use label:not(â€¦) */
    li > label:only-child {
        margin-bottom: unset; /* undo site.css (forms.css) label */
    }
</style>

{# FP-1828: Integrate this into Core #}
<style id="form-css--multi-field-labels">
    .help-text .field-wrapper:first-child label {
        /* To mimic .field-wrapper `margin-bottom: 2rem` */
        /* IDEA: Change .field-wrapper margin to be on top except for first */
        margin-top: 2rem;
    }

    /* for now: */
    label + .help-text {
        margin-top: unset; /* undo site.css :not(ul) + .help-text margin-top */
    }
    /*
    /* but in Core, change this: */
    /*
    :not(ul) + .help-text {
        margin-top: 0.3em; /* mimic Bootstrap _reboot.css label { margin-bottom } *\/
    }
    *//* to this: */
    /* FAQ: Adequate space is beneath lists of inputs and labels */
    /*
    :not(ul, label + .help-text) + .help-text {
        margin-top: 0.3em; /* mimic Bootstrap _reboot.css label margin-bottom *\/
    }
    */

    .help-text .field-wrapper:last-of-type {
        /* IDEA: Change .field-wrapper margin to be on top except for first */
        margin-bottom: unset; /* undo site.css .field-wrapper margin-bottom */
    }
</style>

{# FP-1828: Integrate this into Core #}
<style id="form-css--help-text-headings">
    /* To make help text not constrained by .field-wrapper layout */
    .field-wrapper:not(.checkboxinput) .help-text {
        align-self: stretch;
    }
    /* Tp prevent help text font-style from affecting any tags */
    /* FAQ: Help text can contain inline elements like <samp> */
    /* FAQ: Help text is abused (allowed) to add headings between form fields */
    .help-text > :not(details, a, samp) {
        font-style: initial;
    }
</style>

{# FP-1828: Add this to Core #}
{# WARNING: The `__suffix` has bug; it shrinks field width #}
<style id="form-affix-input--css">
    .s-affixed-input-wrapper:not(
        .checkboxinput,
        .radio,
        .select,
        .checkboxselectmultiple,
        .textarea
    ) {
        display: grid;
        align-items: start;
        grid-template-columns: auto 1fr;
        grid-template-areas:
            "label label"
            var(--input-row, "input input")
            "help help"
            "error error";
    }
    .s-affixed-input-wrapper:has(.s-affixed-input-wrapper__prefix) {
        --input-row: "prefix input";
    }
    .s-affixed-input-wrapper:has(.s-affixed-input-wrapper__suffix) {
        --input-row: "input suffix";
    }
    .s-affixed-input-wrapper label { grid-area: label; }
    .s-affixed-input-wrapper input { grid-area: input; }
    .s-affixed-input-wrapper__prefix { grid-area: prefix; }
    .s-affixed-input-wrapper__suffix { grid-area: suffix; }
    .s-affixed-input-wrapper .help-text { grid-area: help; }
    .s-affixed-input-wrapper .field-errors { grid-area: error; }

    .s-affixed-input-wrapper {
      --width: 1em;
      --padding-vert: 5px; /* mimic input */
      --padding-horz: 10px; /* mimic input */
    }
    .s-affixed-input-wrapper__prefix,
    .s-affixed-input-wrapper__suffix {
      /* To mimic shape of an input */
      display: inline-block;
      padding: var(--padding-vert) var(--padding-horz);

      /* To have consistent size */
      width: var(--width);
      text-align: center;
      box-sizing: content-box;

      /* To limit interaction */
      user-select: none;
      pointer-events: none;
    }

    /* To render <span> atop and (as if) within input */
    .s-affixed-input-wrapper__prefix {
      position: relative;
      top: var(--global-border-width--normal);
      left: var(--global-border-width--normal);
      margin-right: calc(-1 * var(--width) - var(--padding-horz) * 2);
    }
    .s-affixed-input-wrapper__suffix {
      position: relative;
      top: var(--global-border-width--normal);
      right: var(--global-border-width--normal);
      margin-left: calc(-1 * var(--width) - var(--padding-horz) * 2);
    }
    .s-affixed-input-wrapper__prefix + input {
      text-indent: calc(var(--width) + var(--padding-horz));
    }
</style>
